{% extends 'base.html' %}
{% load static %}

{% block head %}
    <link href="{% static 'product/css/event_detail.css' %}" rel="stylesheet">
{% endblock head %}


{% block content %}
    <a href="{% url 'product:event_list' %}" class="btn btn-outline-secondary btn-sm mt-4">戻る</a>
    <hr>

    <h6 class="mt-4">作成者:{{ event.create_user }}</h6>
    <div class="mt-2 mb-2">
        <h1 class="inline mr-2">{{ event.name }}</h1>

        <p class="published-status">
            {% if event.published_date %}
                {{ event.published_date }}に公開
            {% else %}
                未公開
            {% endif %}
        </p>
    </div>

    {% if user == event.create_user %}
        <a href="{% url 'product:event_update' event.pk %}" class="btn btn-primary btn-sm">更新</a>
        <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#delete_modal">削除</button>
    {% endif %}

    <p class="mb-4">{{ event.description }}</p>
    <hr>

    <div class="card mt-4">
        <h4 class="card-header">README</h4>
        <div class="card-text">
            <p class="m-2">{{ event.readme }}</p>
        </div>
    </div>
    


    <!-- Delete modal ========================================= -->
    <div class="modal fade" id="delete_modal" role="dialog" aria-labelledby="delete_modal_label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete_modal_label">削除します</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <p>イベント: 「{{ event.name }}」削除してよろしいですか？</p>
                </div>

                <div class="modal-footer">
                    <a href="{% url 'product:event_delete' event.pk %}" class="btn btn-danger">削除</a>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">閉じる</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ! Delete modal ========================================= -->

{% endblock content %}

